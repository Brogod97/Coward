<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="memberMapper">
  <resultMap type="member" id="member_rm">
		<id property="memberNo" 		column="MEMBER_NO"/>
		<result property="memberType" 		column="MEMBER_TYPE"/>
		<result property="memberId" 	column="MEMBER_ID"/>
		<result property="memberPw" 		column="MEMBER_PW"/>
		<result property="memberNick" 	column="MEMBER_NICK"/>
		<result property="profileImg" 	column="PROFILE_IMG"/>
		<result property="phone" 		column="PHONE"/>
		<result property="regionNo" 	column="REGION_NO"/>
		<result property="stack" 	column="STACK"/>
		<result property="stack"    column="SKILL"/>
		<result property="slogan" 	column="SLOGAN"/>
		<result property="introduce" 	column="INTRODUCE"/>
		<result property="totalPrice" 	column="TOTAL_PRICE"/>
		<result property="currPrice" 	column="CURR_PRICE"/>
		<result property="enrollDate" 	column="ENROLL_DATE"/>
		<result property="secessionFlag" 	column="SECESSION_FL"/>
		<result property="termsFlag" 	column="TERMS_FL"/>
		<result property="snsFlag" 	column="SNS_FL"/>
	 </resultMap>


	 <select id="login" parameterType="member" resultMap="member_rm">
	 	SELECT *
		FROM MEMBER
		WHERE MEMBER_ID = #{memberId}
		AND MEMBER_PW= #{memberPw}
		AND SECESSION_FL = 'N'
	 </select>
	 
	 <!-- 우승횟수 랭킹 조회 -->
	<select id="getPriceKingList" resultMap="member_rm">
		SELECT WINNER AS 우승자번호, COUNT(MEMBER_NO) AS 우승횟수
		FROM CONTEST
		GROUP BY WINNER
		HAVING WINNER IS NOT NULL
		ORDER BY 우승횟수 DESC
	 </select>
</mapper> 